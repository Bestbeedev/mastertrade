import{u as E,r as g,a as R,j as e,H as $,L as k,t as y,b as H}from"./app-CrawgoCe.js";import{A as M}from"./app-layout-DfcnZheQ.js";import{C as u,a as v,b as N,d as o,c as q}from"./card-CAnZI0ok.js";import{B as b}from"./auth-BgAybA0k.js";import{c as J,s as c,B as t}from"./index-DsAE6S8J.js";import{I as O}from"./input-B0f9F1lR.js";import{P as G}from"./progress-CUoFFPbe.js";import{D as K,a as Q,b as U,c as W,d as X}from"./dialog-DUMmkX7I.js";import{A as Y}from"./arrow-left-Dem7fxLY.js";import{F as Z}from"./filter-j8-4c0qT.js";import{B as C}from"./book-open-iIL5E-ol.js";import{A as ee}from"./award-DPrCn0XS.js";import{C as A}from"./clock-DB5bF2UD.js";import{F as D}from"./file-text-Dt_JVa7q.js";import{C as se}from"./circle-play-B-PIJWqM.js";/* empty css            */import"./chevron-right-CbrF_LyD.js";import"./index-CWelApJs.js";import"./index-BSR4FWt4.js";import"./index-2DkYc2p9.js";import"./index-BJrNQDjd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],T=J("Video",te);function Ce(){const z=[{title:"Formation",href:c("courses")},{title:"Toutes les formations",href:c("all-courses")}],{courses:L=[]}=E().props,m=Array.isArray(L)?L:[],[p,P]=g.useState(""),[l,f]=g.useState("all"),[n,h]=g.useState("all"),[d,j]=g.useState(null),I=R({}),_=(s,r)=>{const i=r?"Paiement simulé en cours...":"Inscription en cours...",a=y.loading(i);I.post(c("courses.enroll",s.id),{onSuccess:()=>{y.success("Inscription effectuée",{id:a}),H.visit(c("courses.show",s.id))},onError:()=>{y.error("Impossible de s'inscrire",{id:a})},preserveScroll:!0})},F=m.filter(s=>{const r=p?s.title.toLowerCase().includes(p.toLowerCase())||(s.description||"").toLowerCase().includes(p.toLowerCase()):!0,i=(s.level||"").toLowerCase(),a=l.toLowerCase(),x=l==="all"||!i||i==="tous niveaux"?!0:i===a,w=n==="all"?!0:(s.primary_type||"").toLowerCase()===n.toLowerCase();return r&&x&&w}),S=s=>s==="video"?"Vidéo":s==="pdf"?"PDF":s==="mixte"?"Mixte":"Non défini",B=s=>s.is_paid?typeof s.price=="number"?`${s.price.toLocaleString("fr-FR")} FCFA`:"Payant":"Gratuit",V=s=>s||"Tous niveaux";return e.jsxs(M,{breadcrumbs:z,children:[e.jsx($,{title:"Toutes les formations"}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 border-b pb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(t,{asChild:!0,variant:"outline",size:"sm",className:"hidden sm:inline-flex",children:e.jsxs(k,{href:c("courses"),className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"})," Retour au centre de formation"]})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Toutes les formations"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez l'ensemble des formations disponibles et rejoignez celles qui vous intéressent."})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center",children:e.jsx("div",{className:"relative w-full sm:w-72",children:e.jsx(O,{placeholder:"Rechercher une formation...",className:"pl-3 pr-3",value:p,onChange:s=>P(s.target.value)})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),"Filtres"]}),e.jsx(t,{size:"sm",variant:l==="all"?"default":"outline",onClick:()=>f("all"),children:"Tous niveaux"}),e.jsx(t,{size:"sm",variant:l==="Débutant"?"default":"outline",onClick:()=>f("Débutant"),children:"Débutant"}),e.jsx(t,{size:"sm",variant:l==="Intermédiaire"?"default":"outline",onClick:()=>f("Intermédiaire"),children:"Intermédiaire"}),e.jsx(t,{size:"sm",variant:l==="Avancé"?"default":"outline",onClick:()=>f("Avancé"),children:"Avancé"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx(t,{size:"sm",variant:n==="all"?"default":"outline",onClick:()=>h("all"),children:"Tous les types"}),e.jsx(t,{size:"sm",variant:n==="video"?"default":"outline",onClick:()=>h("video"),children:"Vidéo"}),e.jsx(t,{size:"sm",variant:n==="pdf"?"default":"outline",onClick:()=>h("pdf"),children:"PDF"}),e.jsx(t,{size:"sm",variant:n==="mixte"?"default":"outline",onClick:()=>h("mixte"),children:"Mixte"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(u,{children:[e.jsx(v,{className:"pb-2 flex flex-row items-center justify-between",children:e.jsxs(N,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"})," Formations disponibles"]})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),e.jsxs(u,{children:[e.jsx(v,{className:"pb-2 flex flex-row items-center justify-between",children:e.jsxs(N,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"})," Formations suivies"]})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.filter(s=>(s.progress_percent||0)>0).length})})]}),e.jsxs(u,{children:[e.jsx(v,{className:"pb-2 flex flex-row items-center justify-between",children:e.jsxs(N,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"})," Temps total estimé"]})}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.reduce((s,r)=>s+(r.duration_seconds||0),0)?`~${Math.round(m.reduce((s,r)=>s+(r.duration_seconds||0),0)/3600)}h`:"—"})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[F.map(s=>{const r=V(s.level),i=S(s.primary_type),a=s.lessons_count??0,x=s.progress_percent??0,w=!!s.is_enrolled||x>0;return e.jsxs(u,{className:"group hover:shadow-lg transition-all",children:[e.jsxs(v,{className:"pb-4",children:[s.cover_image?e.jsx("img",{src:`/storage/${s.cover_image}`,alt:"Cover",className:"aspect-video w-full object-cover rounded-lg mb-4"}):e.jsx("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(C,{className:"h-12 w-12 text-primary/60 group-hover:text-primary transition-colors"})}),e.jsxs(N,{className:"text-xl group-hover:text-primary transition-colors flex items-center gap-2",children:[s.title,e.jsx(b,{variant:"outline",className:"text-[10px] uppercase tracking-wide",children:r})]}),e.jsx(q,{className:"line-clamp-2 mt-1",children:s.intro||s.description})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between text-xs text-muted-foreground gap-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),s.duration_seconds?`${Math.round(s.duration_seconds/60)} min`:"Durée inconnue"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"})," ",a," leçon",a>1?"s":""]}),e.jsxs(b,{variant:"destructive",className:"flex items-center gap-1",children:[s.primary_type==="video"&&e.jsx(T,{className:"h-3 w-3"}),s.primary_type==="pdf"&&e.jsx(D,{className:"h-3 w-3"}),s.primary_type==="mixte"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-3 w-3"}),e.jsx(D,{className:"h-3 w-3"})]}),i]}),e.jsx(b,{className:"font-semibold bg-green-600 shadow-lg text-xs",children:B(s)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[x,"%"]})]}),e.jsx(G,{value:x,className:"h-2"})]})]}),e.jsxs(o,{className:"border-t pt-4 flex flex-col sm:flex-row gap-2 justify-between items-center",children:[e.jsxs(t,{variant:s.is_paid?"destructive":"default",className:"w-full sm:w-auto flex-1",onClick:()=>{s.is_paid?j(s):_(s,!1)},children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),s.is_paid?"Rejoindre (payant)":w?"Continuer gratuitement":"Commencer gratuitement"]}),e.jsx(t,{variant:"outline",size:"sm",className:"w-full sm:w-auto",asChild:!0,children:e.jsx(k,{href:c("courses.show",s.id),children:"Détail du cours"})})]})]},s.id)}),F.length===0&&e.jsx(u,{className:"col-span-full",children:e.jsx(o,{className:"py-8 text-center text-sm text-muted-foreground",children:"Aucune formation ne correspond à vos critères de recherche."})})]})]}),e.jsx(K,{open:!!d,onOpenChange:s=>{s||j(null)},children:e.jsxs(Q,{className:"max-w-4xl lg:max-w-6xl xl:max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(U,{children:[e.jsx(W,{children:"Paiement simulé"}),e.jsxs(X,{children:["Vous êtes sur le point de rejoindre la formation",d?` "${d.title}"`:"",". Aucun paiement réel ne sera effectué : il s'agit uniquement d'une simulation, vous serez inscrit immédiatement."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(t,{variant:"outline",type:"button",onClick:()=>j(null),children:"Annuler"}),e.jsx(t,{variant:"destructive",type:"button",onClick:()=>{if(d){const s=d;j(null),_(s,!0)}},children:"Confirmer l'inscription"})]})]})})]})}export{Ce as default};
