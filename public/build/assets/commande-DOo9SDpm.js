import{r as u,u as _,j as e,H as z,L as p}from"./app-B3Y0P8eL.js";import{A as B}from"./app-layout-BmrSMU7B.js";import{c as F,f as H,B as r,s as c}from"./index-BS9Mkhtc.js";import{I}from"./input-B58C95N6.js";import{C as h,a as f,b as g,d as j,c as M}from"./card-B6WQ6knZ.js";import{D as V,B as P}from"./auth-ClV7ZO7P.js";import{S as R,a as q,b as K,c as O,d as l}from"./select-CRiprpJX.js";import{P as i}from"./package-BLdoJui-.js";import{C as v}from"./calendar-CXkEJjPQ.js";import{D as N}from"./download-BmkC4sJt.js";import{S as U}from"./search-DX38BU3V.js";import{E as G}from"./eye-BYfEqqMa.js";/* empty css            */import"./chevron-right-CR-mXq2c.js";import"./index-BJlpveyn.js";import"./index-DOpKAXXZ.js";import"./index-B7VOcpwy.js";import"./index-ChXgRNoH.js";import"./index-DN2tWQS9.js";import"./check-Dwe-_DrS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Q=F("ArrowUpDown",J);function he(){const b=[{title:"Commandes",href:"/client/commande"}],[d,w]=u.useState("all"),[o,C]=u.useState(""),{orders:t=[]}=_().props,m=s=>H(s??0),x={completed:{variant:"default",text:"Livrée"},pending:{variant:"secondary",text:"En traitement"},processing:{variant:"outline",text:"En cours"},cancelled:{variant:"destructive",text:"Annulée"}},y=t.length,S=t.filter(s=>s.status==="pending").length,k=t.filter(s=>s.status==="completed").length,D=t.reduce((s,a)=>s+(a.amount||0),0),E=[{title:"Commandes totales",value:String(y),description:"",icon:i,trend:"neutral"},{title:"En attente",value:String(S),description:"",icon:v,trend:"neutral"},{title:"Livrées",value:String(k),description:"",icon:N,trend:"neutral"},{title:"Dépensé total",value:m(D),description:"",icon:V,trend:"neutral"}];return e.jsxs(B,{breadcrumbs:b,children:[e.jsx(z,{title:"Mes Commandes"}),e.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Mes Commandes"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Suivez l'état de vos commandes et téléchargements"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(I,{placeholder:"Rechercher une commande...",className:"pl-10",value:o,onChange:s=>C(s.target.value)})]}),e.jsxs(R,{value:d,onValueChange:w,children:[e.jsx(q,{className:"w-40",children:e.jsx(K,{placeholder:"Statut"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"Tous les statuts"}),e.jsx(l,{value:"completed",children:"Livrées"}),e.jsx(l,{value:"pending",children:"En traitement"}),e.jsx(l,{value:"processing",children:"En cours"}),e.jsx(l,{value:"cancelled",children:"Annulées"})]})]})]})]})})}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:E.map((s,a)=>e.jsxs(h,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:s.title}),typeof s.icon=="string"?e.jsx("div",{className:"h-4 w-4 text-muted-foreground font-bold",children:s.icon}):e.jsx(s.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})]},a))}),e.jsxs(h,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Historique des commandes"}),e.jsx(M,{children:"Consultez toutes vos commandes passées"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(r,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Trier"]})})]})}),e.jsxs(j,{className:"p-0",children:[e.jsx("div",{className:"divide-y",children:t.map(s=>{const a=s.product?.name??s.product,A=s.created_at?new Date(s.created_at).toLocaleDateString("fr-FR"):"",L=typeof s.amount=="number"?m(s.amount):String(s.amount??""),n=s.status,T=x[n]?.text||String(s.status);return e.jsx("div",{className:"p-6 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(i,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:a}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),A]}),s.licenseKey&&e.jsxs("span",{children:["Clé de licence: ",s.licenseKey]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col xl:flex-row items-start lg:items-end xl:items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:L}),e.jsx(P,{variant:x[n]?.variant,children:T})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(p,{href:c("orders.show",s.id),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Détails"]})}),n==="completed"&&s.product?.download_url&&e.jsx(r,{asChild:!0,variant:"default",size:"sm",children:e.jsxs("a",{href:c("downloads.start",s.product_id),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Télécharger"]})})]})]})]})},s.id)})}),t.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(i,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune commande trouvée"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:o||d!=="all"?"Aucune commande ne correspond à vos critères de recherche.":"Vous n'avez pas encore passé de commande."}),e.jsx(r,{asChild:!0,children:e.jsx(p,{href:c("catalogs"),children:"Explorer le catalogue"})})]})]})]})]})]})}export{he as default};
