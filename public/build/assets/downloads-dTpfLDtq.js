import{u as g,r as l,j as e,H as f}from"./app-CrawgoCe.js";import{A as w}from"./app-layout-DfcnZheQ.js";import{C as N,a as b,b as v,c as C,d as T}from"./card-CAnZI0ok.js";import{T as L,a as y,b as c,c as a,d as _,e as t}from"./table-z59bnX-N.js";import{I as A}from"./input-B0f9F1lR.js";import{B as o}from"./auth-BgAybA0k.js";/* empty css            */import"./index-DsAE6S8J.js";import"./chevron-right-CbrF_LyD.js";import"./index-CWelApJs.js";import"./index-BSR4FWt4.js";import"./index-2DkYc2p9.js";import"./index-BJrNQDjd.js";function U(){const{logs:i=[]}=g().props,[n,m]=l.useState(""),d=l.useMemo(()=>{const s=n.trim().toLowerCase();return s?i.filter(r=>{const x=`${r.user?.name??""} ${r.user?.email??""}`.toLowerCase(),p=`${r.product?.name??""} ${r.product?.version??""}`.toLowerCase(),h=(r.ip_address??"").toLowerCase(),j=(r.user_agent??"").toLowerCase();return x.includes(s)||p.includes(s)||h.includes(s)||j.includes(s)}):i},[i,n]),u=s=>s?new Date(s).toLocaleString("fr-FR"):"—";return e.jsxs(w,{breadcrumbs:[{title:"Admin",href:"/admin"},{title:"Téléchargements",href:"/admin/downloads"}],children:[e.jsx(f,{title:"Logs de téléchargements"}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:e.jsxs(N,{children:[e.jsxs(b,{className:"pb-3",children:[e.jsx(v,{className:"text-base font-semibold",children:"Historique des téléchargements"}),e.jsx(C,{children:"Liste détaillée des téléchargements effectués par les utilisateurs"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[e.jsx(A,{value:n,onChange:s=>m(s.target.value),placeholder:"Rechercher (utilisateur, produit, IP, user agent)"}),e.jsxs(o,{className:"text-sm shadow-lg bg-green-600 text-white px-3 py-1.5",children:[d.length," téléchargements"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-x-auto",children:[e.jsxs(L,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(a,{className:"min-w-[180px]",children:"Utilisateur"}),e.jsx(a,{className:"min-w-[180px]",children:"Produit"}),e.jsx(a,{className:"min-w-[120px]",children:"Version"}),e.jsx(a,{className:"min-w-[160px]",children:"Adresse IP"}),e.jsx(a,{className:"min-w-[240px]",children:"Navigateur"}),e.jsx(a,{className:"min-w-[180px]",children:"Téléchargé le"})]})}),e.jsx(_,{children:d.map(s=>e.jsxs(c,{children:[e.jsxs(t,{children:[e.jsx("div",{className:"font-medium",children:s.user?.name??"—"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.user?.email??""})]}),e.jsx(t,{children:e.jsx("div",{className:"font-medium",children:s.product?.name??"—"})}),e.jsx(t,{children:e.jsx(o,{variant:"secondary",children:s.file_version||s.product?.version||"—"})}),e.jsx(t,{children:s.ip_address??"—"}),e.jsx(t,{children:e.jsx("div",{className:"max-w-[420px] truncate",title:s.user_agent,children:s.user_agent??"—"})}),e.jsx(t,{children:u(s.timestamp)})]},s.id))})]}),d.length===0&&e.jsx("div",{className:"p-6 text-sm text-muted-foreground",children:"Aucun téléchargement trouvé."})]})]})]})})]})}export{U as default};
