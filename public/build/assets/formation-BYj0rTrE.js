import{r as N,u as R,j as e,H as E,L as b,b as H}from"./app-CrawgoCe.js";import{A as M}from"./app-layout-DfcnZheQ.js";import{B as l,s as g}from"./index-DsAE6S8J.js";import{I as V}from"./input-B0f9F1lR.js";import{C as o,a as C,b as w,d as c,c as $,e as q}from"./card-CAnZI0ok.js";import{B as _}from"./auth-BgAybA0k.js";import{P as O}from"./progress-CUoFFPbe.js";import{u as G}from"./use-is-admin-CL9Ycbrm.js";import{B as y}from"./book-open-iIL5E-ol.js";import{C as k}from"./circle-check-big-HH6sNkoO.js";import{A as J}from"./award-DPrCn0XS.js";import{C as S}from"./clock-DB5bF2UD.js";import{S as K}from"./search-DQN__-Xh.js";import{F as A}from"./filter-j8-4c0qT.js";import{C as Q}from"./circle-play-B-PIJWqM.js";/* empty css            */import"./chevron-right-CbrF_LyD.js";import"./index-CWelApJs.js";import"./index-BSR4FWt4.js";import"./index-2DkYc2p9.js";import"./index-BJrNQDjd.js";function he(){const B=G(),F=[{title:"Formation",href:"/client/formation"}],[d,D]=N.useState("all"),[u,P]=N.useState(""),{courses:h=[]}=R().props,n=Array.isArray(h)?h:[],f=n.filter(s=>{const r=s.progress_percent||0;return r>0&&r<100}),m=n.filter(s=>(s.progress_percent||0)>=100||!!s.completed_at),p=n.filter(s=>(s.progress_percent||0)>0||!!s.completed_at),j=n.reduce((s,r)=>s+(r.duration_seconds||0),0),T=p.length?Math.round(p.reduce((s,r)=>s+(r.progress_percent||0),0)/p.length):0,L=[{id:"all",name:"Tous les cours",count:n.length},{id:"in-progress",name:"En cours",count:f.length},{id:"completed",name:"Terminés",count:m.length}],z=[{title:"Cours en cours",value:String(f.length),description:"Formations actives",icon:y},{title:"Cours terminés",value:String(m.length),description:"Bravo pour vos progrès",icon:k},{title:"Progression moyenne",value:`${T}%`,description:"Sur vos cours suivis",icon:J},{title:"Temps total",value:j?"~"+Math.round(j/3600)+"h":"—",description:"Durée estimée",icon:S}],I=n.filter(s=>{const r=u.toLowerCase(),a=s.title.toLowerCase().includes(r)||(s.description||"").toLowerCase().includes(r),t=s.progress_percent||0,i=t>=100||!!s.completed_at,x=t>0&&t<100;return d==="completed"&&!i||d==="in-progress"&&!x?!1:a}),v=[...m].sort((s,r)=>{const a=s.completed_at?new Date(s.completed_at).getTime():0;return(r.completed_at?new Date(r.completed_at).getTime():0)-a}).slice(0,3);return e.jsxs(M,{breadcrumbs:F,children:[e.jsx(E,{title:"Formation"}),e.jsx("div",{className:"border-b flex bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Centre de Formation"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Améliorez vos compétences avec nos formations expertes"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(V,{placeholder:"Rechercher une formation...",className:"pl-10",value:u,onChange:s=>P(s.target.value)})]}),e.jsxs(l,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Filtres"]}),B&&e.jsx(l,{asChild:!0,size:"sm",children:e.jsx(b,{href:g("admin.courses"),children:"Ajouter une formation"})})]})]})})}),e.jsxs("div",{className:" w-full px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:z.map((s,r)=>e.jsxs(o,{children:[e.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:s.title}),e.jsx(s.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.description})]})]},r))}),e.jsxs("div",{className:"flex flex-wrap justify-between gap-2 mb-8",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(s=>e.jsxs(l,{variant:d===s.id?"default":"outline",onClick:()=>D(s.id),className:"relative",children:[s.name,e.jsx(_,{variant:"secondary",className:"ml-2 bg-background text-foreground",children:s.count})]},s.id))}),e.jsxs(l,{variant:"destructive",onClick:()=>H.get(g("all-courses")),className:"flex shadow-lg hover:cursor-pointer! items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Voir toutes les formations"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:I.map(s=>{const r=String(s.what_you_will_learn||"").split(`
`).filter(Boolean)[0]||"",a=(s.audience||"").length>80?(s.audience||"").slice(0,77)+"…":s.audience||"",t=String(s.tags||"").split(",").map(i=>i.trim()).filter(Boolean).slice(0,3);return e.jsxs(o,{className:"group hover:shadow-lg transition-all",children:[e.jsxs(C,{className:"pb-4",children:[e.jsx("div",{className:"relative",children:s.cover_image?e.jsx("img",{src:`/storage/${s.cover_image}`,alt:"Cover",className:"aspect-video w-full object-cover rounded-lg mb-4"}):e.jsx("div",{className:"aspect-video bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(y,{className:"h-12 w-12 text-primary/60 group-hover:text-primary transition-colors"})})}),e.jsxs(w,{className:"text-xl group-hover:text-primary transition-colors line-clamp-2 flex items-center gap-2",children:[s.title,s.level&&e.jsx("span",{className:"text-[10px] uppercase tracking-wide px-2 py-0.5 rounded-full border bg-background text-muted-foreground",children:s.level})]}),e.jsx($,{className:"line-clamp-2",children:s.intro||s.description})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"h-3 w-3"}),s.duration_seconds?Math.round(s.duration_seconds/60)+" min":"—"]}),e.jsxs("span",{children:[s.lessons_count??0," leçons"]})]}),(r||a||t.length)&&e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Vous apprendrez: "}),e.jsx("span",{children:r})]}),a&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pour: "}),e.jsx("span",{children:a})]}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:t.map((i,x)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full border text-[10px] uppercase tracking-wide bg-background",children:i},x))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[s.progress_percent??0,"%"]})]}),e.jsx(O,{value:s.progress_percent??0,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground"})]})]}),e.jsx(q,{children:e.jsx(l,{asChild:!0,className:"w-full",children:e.jsxs(b,{href:g("courses.show",s.id),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),(s.progress_percent??0)>0?"Continuer":"Commencer"]})})})]},s.id)})}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-6",children:"Récemment terminés"}),v.length===0?e.jsx(o,{children:e.jsx(c,{className:"p-6 text-sm text-muted-foreground",children:"Vous n'avez pas encore terminé de formation. Commencez un cours pour voir votre historique ici."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:v.map(s=>e.jsx(o,{className:"border-green-200 bg-green-50/80 dark:bg-green-900/20",children:e.jsxs(c,{className:"p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.title}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:s.completed_at?`Terminé le ${new Date(s.completed_at).toLocaleDateString("fr-FR")}`:"Formation complétée"})]})]}),e.jsx(_,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 border-green-200 dark:border-green-700 text-[11px]",children:"100% complété"})]})},s.id))})]})]})]})}export{he as default};
