import{U as o,a as _,j as e,H as $,b as ee,t as r}from"./app-CrawgoCe.js";import{A as se}from"./app-layout-DfcnZheQ.js";import{C as A,a as q,b as z,c as E,d as L}from"./card-CAnZI0ok.js";import{c as ae,B as n,s as g}from"./index-DsAE6S8J.js";import{I as c}from"./input-B0f9F1lR.js";import{L as l}from"./label-BOOWJvQK.js";import{S as j,a as f,b as v,c as b,d as m}from"./select-PkxRjFfB.js";import{T as te,a as le,b as P,c as B}from"./tabs-BB3rli4r.js";import{B as w}from"./auth-BgAybA0k.js";import{D as M,a as V,b as H,c as R,d as I}from"./dialog-DUMmkX7I.js";import{T as re}from"./trash-2-TalF82Ye.js";/* empty css            */import"./chevron-right-CbrF_LyD.js";import"./index-2DkYc2p9.js";import"./index-BSR4FWt4.js";import"./index-CWelApJs.js";import"./index-BANTq3rp.js";import"./check-BvN_zyQd.js";import"./index-BJrNQDjd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ne=ae("Pencil",ie),y=[{value:"faq",label:"FAQ"},{value:"documentation",label:"Documentation"},{value:"tutorial",label:"Tutoriel"}],ce=[{value:"all",label:"Tous"},{value:"published",label:"Publiés"},{value:"draft",label:"Brouillons"}];function de(u){const d=y.find(N=>N.value===u);return d?d.label:u||"Général"}function Te({articles:u=[],filters:d={}}){const[N,D]=o.useState("list"),[S,G]=o.useState(d.q??""),[k,O]=o.useState(d.category??"all"),[T,Q]=o.useState(d.status??"all"),[x,p]=o.useState(null),[C,h]=o.useState(null),a=_({title:"",slug:"",category:"faq",summary:"",content:"",tags:"",is_published:!0,is_popular:!1}),t=_({title:"",slug:"",category:"faq",summary:"",content:"",tags:"",is_published:!1,is_popular:!1}),{delete:U,processing:F}=_({}),J=s=>{s.preventDefault(),ee.get(g("admin.help-articles"),{q:S,category:k,status:T},{preserveState:!0,replace:!0,preserveScroll:!0})},K=s=>{p(s),t.setData({title:s.title??"",slug:s.slug??"",category:s.category??"faq",summary:s.summary??"",content:s.content??"",tags:s.tags??"",is_published:!!s.is_published,is_popular:!!s.is_popular})},W=s=>{s.preventDefault();const i=r.loading("Création de l'article d'aide...");a.post(g("admin.help-articles.store"),{onSuccess:()=>{r.success("Article créé",{id:i}),a.reset(),a.setData({title:"",slug:"",category:"faq",summary:"",content:"",tags:"",is_published:!0,is_popular:!1}),D("list")},onError:()=>r.error("Erreur lors de la création",{id:i}),preserveScroll:!0})},X=s=>{if(s.preventDefault(),!x)return;const i=r.loading("Mise à jour de l'article d'aide...");t.patch(g("admin.help-articles.update",{article:x.id}),{onSuccess:()=>{r.success("Article mis à jour",{id:i}),p(null)},onError:()=>r.error("Erreur lors de la mise à jour",{id:i}),preserveScroll:!0})},Y=()=>{if(!C)return;const s=r.loading("Suppression de l'article d'aide...");U(g("admin.help-articles.destroy",{article:C.id}),{onSuccess:()=>{r.success("Article supprimé",{id:s}),h(null)},onError:()=>r.error("Erreur lors de la suppression",{id:s}),preserveScroll:!0})},Z=s=>{if(!s)return"";const i=new Date(s);return Number.isNaN(i.getTime())?"":i.toLocaleDateString("fr-FR")};return e.jsxs(se,{breadcrumbs:[{title:"Admin",href:"/admin"},{title:"Articles d'aide",href:"/admin/help-articles"}],children:[e.jsx($,{title:"Admin • Articles d'aide"}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des articles d'aide"}),e.jsx("p",{className:"text-muted-foreground",children:"Créez et organisez les contenus du centre d'aide (FAQ, documentation, tutoriels)."})]})}),e.jsxs(te,{value:N,onValueChange:D,className:"space-y-4",children:[e.jsxs(le,{children:[e.jsx(P,{value:"list",children:"Liste des articles"}),e.jsx(P,{value:"new",children:"Nouvel article"})]}),e.jsxs(B,{value:"list",className:"space-y-4",children:[e.jsxs(A,{children:[e.jsxs(q,{children:[e.jsx(z,{children:"Articles existants"}),e.jsx(E,{children:"Filtrez et gérez les contenus du centre d'aide."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:J,className:"grid gap-3 md:grid-cols-[minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_auto] items-center",children:[e.jsx(c,{placeholder:"Recherche dans le titre, le résumé, le contenu...",value:S,onChange:s=>G(s.target.value)}),e.jsxs(j,{value:k,onValueChange:O,children:[e.jsx(f,{className:"w-full",children:e.jsx(v,{placeholder:"Catégorie"})}),e.jsxs(b,{children:[e.jsx(m,{value:"all",children:"Toutes les catégories"}),y.map(s=>e.jsx(m,{value:s.value,children:s.label},s.value))]})]}),e.jsxs(j,{value:T,onValueChange:Q,children:[e.jsx(f,{className:"w-full",children:e.jsx(v,{placeholder:"Statut"})}),e.jsx(b,{children:ce.map(s=>e.jsx(m,{value:s.value,children:s.label},s.value))})]}),e.jsx(n,{type:"submit",variant:"outline",children:"Filtrer"})]}),e.jsxs("div",{className:"space-y-2",children:[u.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:`Aucun article d'aide pour le moment. Créez votre premier contenu dans l'onglet "Nouvel article".`}),u.map(s=>e.jsxs("div",{className:"flex items-start justify-between gap-4 p-3 border rounded-lg bg-card/50",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{variant:"outline",className:"text-xs",children:de(s.category)}),e.jsx(w,{variant:s.is_published?"default":"outline",className:"text-xs",children:s.is_published?"Publié":"Brouillon"}),s.is_popular&&e.jsx(w,{variant:"secondary",className:"text-xs",children:"Populaire"})]}),e.jsx("div",{className:"font-medium",children:s.title}),s.summary&&e.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:s.summary}),e.jsxs("div",{className:"text-[11px] text-muted-foreground flex flex-wrap gap-3 mt-1",children:[e.jsxs("span",{children:["Créé le ",Z(s.created_at)]}),typeof s.views=="number"&&e.jsxs("span",{children:[s.views," vues"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsx(n,{type:"button",size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>K(s),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(n,{type:"button",size:"icon",variant:"destructive",className:"h-8 w-8",onClick:()=>h(s),disabled:F,children:e.jsx(re,{className:"h-4 w-4"})})]})]},s.id))]})]})]}),e.jsx(M,{open:!!x,onOpenChange:s=>{s||p(null)},children:e.jsxs(V,{className:"max-w-4xl lg:max-w-6xl xl:max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(R,{children:"Modifier l'article d'aide"}),e.jsx(I,{children:"Mettez à jour le contenu de l'article sélectionné."})]}),x&&e.jsxs("form",{onSubmit:X,className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"e_title",children:"Titre"}),e.jsx(c,{id:"e_title",value:t.data.title,onChange:s=>t.setData("title",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"e_slug",children:"Slug (facultatif)"}),e.jsx(c,{id:"e_slug",value:t.data.slug||"",onChange:s=>t.setData("slug",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Catégorie"}),e.jsxs(j,{value:t.data.category,onValueChange:s=>t.setData("category",s),children:[e.jsx(f,{className:"w-full",children:e.jsx(v,{placeholder:"Catégorie"})}),e.jsx(b,{children:y.map(s=>e.jsx(m,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"e_summary",children:"Résumé"}),e.jsx("textarea",{id:"e_summary",rows:3,value:t.data.summary||"",onChange:s=>t.setData("summary",s.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"e_content",children:"Contenu"}),e.jsx("textarea",{id:"e_content",rows:8,value:t.data.content||"",onChange:s=>t.setData("content",s.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"e_tags",children:"Tags (séparés par des virgules)"}),e.jsx(c,{id:"e_tags",value:t.data.tags||"",onChange:s=>t.setData("tags",s.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!t.data.is_published,onChange:s=>t.setData("is_published",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{children:"Publié"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!t.data.is_popular,onChange:s=>t.setData("is_popular",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{children:"Mettre en avant (article populaire)"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"ghost",onClick:()=>p(null),children:"Annuler"}),e.jsx(n,{type:"submit",children:"Enregistrer"})]})]})]})}),e.jsx(M,{open:!!C,onOpenChange:s=>{s||h(null)},children:e.jsxs(V,{className:"max-w-4xl lg:max-w-6xl xl:max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(R,{children:"Confirmer la suppression"}),e.jsx(I,{children:"Êtes-vous sûr de vouloir supprimer cet article d'aide ? Cette action est définitive."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>h(null),children:"Annuler"}),e.jsx(n,{type:"button",variant:"destructive",onClick:Y,disabled:F,children:"Supprimer"})]})]})})]}),e.jsx(B,{value:"new",children:e.jsx("form",{onSubmit:W,children:e.jsxs(A,{children:[e.jsxs(q,{children:[e.jsx(z,{children:"Nouvel article d'aide"}),e.jsx(E,{children:"Créez un article pour enrichir le centre d'aide."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"c_title",children:"Titre"}),e.jsx(c,{id:"c_title",value:a.data.title,onChange:s=>a.setData("title",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"c_slug",children:"Slug (facultatif)"}),e.jsx(c,{id:"c_slug",value:a.data.slug||"",onChange:s=>a.setData("slug",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Catégorie"}),e.jsxs(j,{value:a.data.category,onValueChange:s=>a.setData("category",s),children:[e.jsx(f,{className:"w-full",children:e.jsx(v,{placeholder:"Catégorie"})}),e.jsx(b,{children:y.map(s=>e.jsx(m,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"c_summary",children:"Résumé"}),e.jsx("textarea",{id:"c_summary",rows:3,value:a.data.summary||"",onChange:s=>a.setData("summary",s.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"c_content",children:"Contenu"}),e.jsx("textarea",{id:"c_content",rows:8,value:a.data.content||"",onChange:s=>a.setData("content",s.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"c_tags",children:"Tags (séparés par des virgules)"}),e.jsx(c,{id:"c_tags",value:a.data.tags||"",onChange:s=>a.setData("tags",s.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!a.data.is_published,onChange:s=>a.setData("is_published",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{children:"Publié"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!a.data.is_popular,onChange:s=>a.setData("is_popular",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{children:"Mettre en avant (article populaire)"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{type:"submit",children:"Créer l'article"})})]})]})})})]})]})]})}export{Te as default};
