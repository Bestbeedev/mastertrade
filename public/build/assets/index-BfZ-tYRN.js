import{j as e,u as X,H as Y,L as j,U as J}from"./app-B3Y0P8eL.js";import{A as W}from"./app-layout-BmrSMU7B.js";import{C as n,a as c,b as d,d as o,c as w}from"./card-B6WQ6knZ.js";import{c as K,B as p,f as Z}from"./index-BS9Mkhtc.js";import{D as ee,B as A}from"./auth-ClV7ZO7P.js";import{H as se,I as U,X as y,Y as b,K as te,M as _,T as L,R as H,N as T,O as D,J as V}from"./chart-B_7uo0zL.js";import{G as ie}from"./graduation-cap-Dqs56_Wg.js";import{P as ae}from"./package-BLdoJui-.js";import{U as z}from"./users-DymeVE4W.js";import{R}from"./receipt-BiTZ1agA.js";import{T as re}from"./trending-up-DFvEsXjW.js";import{D as $}from"./download-BmkC4sJt.js";import{C as P}from"./clock-CWl00VTJ.js";import{C as le}from"./circle-help-D8rWDz6I.js";import{C as ne}from"./circle-alert-CpR5lEv3.js";/* empty css            */import"./chevron-right-CR-mXq2c.js";import"./index-BJlpveyn.js";import"./index-DOpKAXXZ.js";import"./index-B7VOcpwy.js";import"./index-ChXgRNoH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],M=K("ChartNoAxesColumn",ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],G=K("Ticket",de);var oe=se({chartName:"LineChart",GraphicalChild:U,axisComponents:[{axisType:"xAxis",AxisComp:y},{axisType:"yAxis",AxisComp:b}],formatAxisMap:te});const F=a=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"short"}).format(new Date(a));function me({data:a}){return a?.length?e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Commandes (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0",children:e.jsx(_,{config:{},children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(H,{data:a,children:[e.jsx(y,{dataKey:"date",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:F}),e.jsx(b,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:x=>`${x}`}),e.jsx(T,{content:e.jsx(D,{})}),e.jsx(V,{dataKey:"value",fill:"currentColor",className:"fill-blue-400",radius:[4,4,0,0]})]})})})})]}):e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Commandes (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0 flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Aucune donnée disponible"})})]})}function xe({data:a}){return a?.length?e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Revenus (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0",children:e.jsx(_,{config:{},children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(oe,{data:a,children:[e.jsx(y,{dataKey:"date",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:F}),e.jsx(b,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:x=>`CFA ${x}`}),e.jsx(T,{content:e.jsx(D,{formatter:x=>[`CFA ${x}`,"Revenu"]})}),e.jsx(U,{type:"monotone",dataKey:"value",stroke:"currentColor",className:"text-green-400",strokeWidth:2,dot:!1})]})})})})]}):e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Revenus (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0 flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Aucune donnée disponible"})})]})}function ue({data:a}){return a?.length?e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Téléchargements (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0",children:e.jsx(_,{config:{},className:"h-full w-full [&_.recharts-cartesian-axis-tick]:text-xs",children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(H,{data:a,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx(y,{dataKey:"date",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:F}),e.jsx(b,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(T,{content:e.jsx(D,{}),wrapperStyle:{outline:"none"}}),e.jsx(V,{dataKey:"value",fill:"currentColor",className:"fill-red-500",radius:[4,4,0,0]})]})})})})]}):e.jsxs(n,{className:"h-full flex flex-col",children:[e.jsx(c,{className:"flex-shrink-0",children:e.jsx(d,{children:"Téléchargements (30j)"})}),e.jsx(o,{className:"flex-1 min-h-0 p-0 flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Aucune donnée disponible"})})]})}function $e(){const{adminStats:a,recentOrders:x,recentTickets:B,recentLicenses:I,topProducts30:q,recentProducts:E,recentCourses:O,chartData:C}=X().props,t=a??{products:0,courses:0,users:0,licenses:{total:0,active:0},orders_30d:0,revenue_cents_30d:0,tickets:{total:0,open:0},downloads_30d:0,renewals_due_30d:0},k=s=>Z(s??0),Q=({message:s})=>e.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg bg-muted/20",children:[e.jsx(ne,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),i=({title:s,value:r,icon:u,description:h,action:m,variant:N="default",trend:l,secondaryValue:S})=>e.jsxs(n,{className:"relative",children:[e.jsxs(c,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(u,{className:"h-4 w-4"}),s]}),l&&e.jsxs(A,{variant:l.value>=0?"default":"destructive",className:"text-xs",children:[l.value>=0?"+":"",l.value,"%"]})]}),h&&e.jsx(w,{className:"text-xs",children:h})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center  justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:r}),S&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S})]}),N==="default"&&m]}),l&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:l.label})]})]}),f=({title:s,description:r,children:u,emptyMessage:h="Aucune donnée disponible pour le moment"})=>e.jsxs(n,{children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-base font-semibold",children:s}),e.jsx(w,{children:r})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:u}),J.Children.count(u)===0&&e.jsx(Q,{message:h})]})]}),g=({primary:s,secondary:r,tertiary:u,value:h,status:m,date:N,badge:l})=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3 hover:bg-muted/50 transition-colors group",children:[e.jsxs("div",{className:"flex-1  min-w-0",children:[e.jsxs("div",{className:"flex mb-2 items-center gap-2",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s}),l&&e.jsx(A,{variant:"secondary",className:"text-xs",children:l})]}),r&&e.jsx("div",{className:"text-muted-foreground text-sm truncate mt-1",children:r}),u&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:u})]}),e.jsxs("div",{className:"text-right text-sm ml-4 flex-shrink-0",children:[h&&e.jsx("div",{className:"font-semibold",children:h}),m&&e.jsx(A,{className:`uppercase text-xs font-medium px-2 py-1 rounded-md ${m==="completed"||m==="active"?"text-green-600 bg-green-50 border border-green-200":m==="pending"?"text-yellow-600 bg-yellow-50 border border-yellow-200":m==="cancelled"?"text-red-600 bg-red-50 border border-red-200":"text-muted-foreground bg-gray-50 border border-gray-200"}`,children:m}),N&&e.jsx("div",{className:"text-xs mt-2 text-muted-foreground",children:N})]})]}),v=({title:s,subtitle:r})=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:s}),r&&e.jsx("p",{className:"text-muted-foreground mt-1",children:r})]});return e.jsxs(W,{breadcrumbs:[{title:"Admin",href:"/admin"}],children:[e.jsx(Y,{title:"Tableau de bord Admin"}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-12",children:[e.jsxs("section",{children:[e.jsx(v,{title:"Aperçu général",subtitle:"Vue d'ensemble de votre activité"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Entités principales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsx(i,{title:"Formations",value:t.courses,icon:ie,action:e.jsx(p,{asChild:!0,size:"sm",children:e.jsx(j,{href:"/admin/courses",children:"Gérer"})}),variant:"default"}),e.jsx(i,{title:"Produits",value:t.products,icon:ae,action:e.jsx(p,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(j,{href:"/admin/products",children:"Gérer"})}),variant:"default"}),e.jsx(i,{title:"Utilisateurs",value:t.users,icon:z,action:e.jsx(p,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(j,{href:"/admin/users",children:"Voir"})}),variant:"default"}),e.jsx(i,{title:"Licences",value:t.licenses.total,secondaryValue:`${t.licenses.active} actives`,icon:R,action:e.jsx(p,{asChild:!0,size:"sm",children:e.jsx(j,{href:"/admin/licenses",children:"Voir"})}),variant:"default"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance (30 jours)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsx(i,{title:"Commandes",value:t.orders_30d,icon:re,variant:"secondary",description:"Nouvelles commandes"}),e.jsx(i,{title:"Revenus",value:k(t.revenue_cents_30d??0),icon:ee,variant:"secondary",description:"Chiffre d'affaires"}),e.jsx(i,{title:"Téléchargements",value:t.downloads_30d,secondaryValue:`${t.downloads_30d} téléchargements`,icon:$,action:e.jsx(p,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(j,{href:"/admin/downloads",children:"Voir"})}),variant:"default",description:"Fichiers téléchargés"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Formations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsx(i,{title:"Nouvelles inscriptions",value:t.course_enrollments_30d??0,icon:z,variant:"secondary",description:"30 derniers jours"}),e.jsx(i,{title:"Progression moyenne",value:`${t.avg_course_progress??0}%`,icon:M,variant:"default",description:"Tous les cours"}),e.jsx(i,{title:"Taux de complétion",value:"--%",icon:M,variant:"default",description:"En cours d'analyse"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Support & Service"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{title:"Tickets support",value:t.tickets.total,secondaryValue:`${t.tickets.open} ouverts`,icon:G,action:e.jsx(p,{asChild:!0,size:"sm",variant:"secondary",children:e.jsx(j,{href:"supportsTickets",children:"Gérer"})})}),e.jsx(i,{title:"Taux de résolution",value:"--%",icon:P,description:"Temps moyen de réponse"})]})]})]})]}),e.jsxs("section",{className:"w-full overflow-x-auto",children:[e.jsx(v,{title:"Analytiques",subtitle:"Statistiques et tendances récentes"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-w-[300px]",children:[e.jsx("div",{className:"w-full min-w-[300px] h-fit",children:e.jsx(me,{data:C?.map(s=>({date:s.date,value:s.orders}))})}),e.jsx("div",{className:"w-full min-w-[300px] h-fit ",children:e.jsx(xe,{data:C?.map(s=>({date:s.date,value:s.revenue}))})}),e.jsx("div",{className:"lg:col-span-2 w-full min-w-[300px] h-[350px] sm:h-[400px]",children:e.jsx(ue,{data:C?.map(s=>({date:s.date,value:s.downloads}))})})]})]}),e.jsxs("section",{children:[e.jsx(v,{title:"Métriques détaillées",subtitle:"Indicateurs de performance clés"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(i,{title:"Commandes (30j)",value:t.orders_30d,icon:R,description:`${t.licenses?.active??0} licences actives`,variant:"secondary",trend:{value:8,label:"nouvelles commandes"}}),e.jsx(i,{title:"Tickets Support",value:`${t.tickets?.open??0}/${t.tickets?.total??0}`,icon:G,description:"Ouverts / Total",variant:"secondary"}),e.jsx(i,{title:"Téléchargements (30j)",value:t.downloads_30d??0,icon:$,variant:"secondary",trend:{value:15,label:"augmentation"}}),e.jsx(i,{title:"Renouvellements à venir",value:t.renewals_due_30d??0,icon:P,variant:"secondary",description:"Dans les 30 prochains jours"})]})]}),e.jsxs("section",{children:[e.jsx(v,{title:"Activité récente",subtitle:"Dernières actions sur votre plateforme"}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-1 gap-8",children:[e.jsx(f,{title:"Dernières commandes",description:"5 commandes les plus récentes",emptyMessage:"Aucune commande récente pour le moment",children:(x??[]).map(s=>e.jsx(g,{primary:s.product?.name??"Produit",secondary:new Date(s.created_at).toLocaleDateString("fr-FR"),value:k(s.amount??0),status:s.status,badge:s.product?.type},s.id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{title:"Licences récentes",description:"5 licences les plus récentes",emptyMessage:"Aucune licence créée récemment",children:(I??[]).map(s=>e.jsx(g,{primary:s.product?.name??"Produit",secondary:s.user?.name??"Utilisateur",status:s.status,date:s.expiry_date?new Date(s.expiry_date).toLocaleDateString("fr-FR"):"—",badge:"Licence"},s.id))}),e.jsx(f,{title:"Tickets récents",description:"5 tickets les plus récents",emptyMessage:"Aucun ticket support récent",children:(B??[]).map(s=>e.jsx(g,{primary:s.subject,secondary:s.user?.name??"Utilisateur",status:s.status,date:new Date(s.created_at).toLocaleDateString("fr-FR"),badge:s.priority},s.id))})]})]})]}),e.jsxs("section",{children:[e.jsx(v,{title:"Contenu & Performances",subtitle:"Gestion de vos produits et formations"}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-1 gap-8",children:[e.jsx(f,{title:"Top Produits (30j)",description:"Produits les plus vendus par chiffre d'affaires",emptyMessage:"Aucune vente de produit enregistrée",children:(q??[]).map(s=>e.jsx(g,{primary:s.product?.name??"Produit",value:k(s.revenue_cents??0),tertiary:`${s.orders_count} commandes`,badge:"Top"},s.product_id))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{title:"Produits récents",description:"5 produits ajoutés récemment",emptyMessage:"Aucun produit créé pour le moment",children:(E??[]).map(s=>e.jsx(g,{primary:s.name,secondary:`SKU ${s.sku} ${s.version?`• v${s.version}`:""}`,date:new Date(s.created_at).toLocaleDateString("fr-FR"),badge:"Nouveau"},s.id))}),e.jsx(f,{title:"Formations récentes",description:"5 formations ajoutées récemment",emptyMessage:"Aucune formation créée pour le moment",children:(O??[]).map(s=>e.jsx(g,{primary:s.title,date:new Date(s.created_at).toLocaleDateString("fr-FR"),badge:"Formation"},s.id))})]})]})]}),e.jsxs("section",{children:[e.jsx(v,{title:"Centre d'aide",subtitle:"Gérez les articles de FAQ, documentation et tutoriels affichés dans le centre d'aide client"}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs(n,{children:[e.jsxs(c,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(le,{className:"h-4 w-4"}),"Articles du centre d'aide"]}),e.jsx(w,{children:"Créez et maintenez les articles d'aide (FAQ, documentation, tutoriels)."})]}),e.jsxs(o,{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground max-w-xs",children:"Accédez à l'interface de gestion des articles d'aide."}),e.jsx(p,{asChild:!0,size:"sm",children:e.jsx(j,{href:"/admin/help-articles",children:"Gérer"})})]})]})})]})]})]})}export{$e as default};
