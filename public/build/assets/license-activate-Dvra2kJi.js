import{r as C,j as e,H as D,L as x}from"./app-CrawgoCe.js";import{A as k}from"./app-layout-DfcnZheQ.js";import{c as L,s as a,B as m}from"./index-DsAE6S8J.js";import{C as p,a as R,b as _,c as A,d as u}from"./card-CAnZI0ok.js";import{B as r}from"./auth-BgAybA0k.js";import{A as M}from"./arrow-left-Dem7fxLY.js";import{K as E}from"./key-1DmwhE1Y.js";import{C as T}from"./copy-BE48zhnQ.js";import{D as z}from"./download-BSqmaxjG.js";/* empty css            */import"./chevron-right-CbrF_LyD.js";import"./index-CWelApJs.js";import"./index-BSR4FWt4.js";import"./index-2DkYc2p9.js";import"./index-BJrNQDjd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F=L("CircleCheck",B);function Z({product:h,license:t,completed:l,device_id:c,machine:o}){const j=[{title:"Licenses",href:a("licenses")},{title:"Activation",href:a("licenses.activation.start")}],[f,d]=C.useState(!1),g=async()=>{try{await navigator.clipboard.writeText(t?.key||""),d(!0),setTimeout(()=>d(!1),1500)}catch{}},N=i=>{if(!i)return null;const s=new Date,b=new Date(s.getFullYear(),s.getMonth(),s.getDate()),n=new Date(i),y=new Date(n.getFullYear(),n.getMonth(),n.getDate()),w=1440*60*1e3;return Math.round((y.getTime()-b.getTime())/w)},v=({date:i})=>{const s=N(i);return s===null?null:s<0?e.jsxs("span",{className:"text-xs text-destructive",children:["Expirée il y a ",Math.abs(s)," j"]}):s===0?e.jsx("span",{className:"text-xs text-amber-600",children:"Expire aujourd’hui"}):s<=30?e.jsxs("span",{className:"text-xs text-amber-600",children:["Reste ",s," j"]}):e.jsxs("span",{className:"text-xs text-emerald-600",children:["Reste ",s," j"]})};return e.jsxs(k,{breadcrumbs:j,children:[e.jsx(D,{title:"Licence activée"}),e.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(x,{href:a("licenses"),className:"inline-flex items-center text-sm hover:underline",children:[e.jsx(M,{className:"h-4 w-4 mr-1"})," Retour"]})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:l?"Licence activée":"Votre licence"}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Produit: ",e.jsx(r,{variant:"outline",children:h?.name})]})]})]})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto grid gap-6",children:[e.jsxs(p,{children:[e.jsxs(R,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"})," Détails de la licence"]}),e.jsx(A,{children:"Utilisez cette clé pour activer votre logiciel"})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("code",{className:"bg-muted px-3 py-2 rounded font-mono text-sm border flex-1",children:t?.key}),e.jsxs(m,{variant:"outline",onClick:g,className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),f?"Copié!":"Copier"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Statut: ",e.jsx(r,{children:t?.status})]}),e.jsxs("span",{children:["Expire le: ",e.jsx(r,{variant:"secondary",children:t?.expires_at?new Date(t.expires_at).toLocaleDateString("fr-FR"):"—"}),t?.expires_at?e.jsx("span",{className:"mx-1",children:"•"}):null,t?.expires_at?e.jsx(v,{date:t.expires_at}):null]}),c?e.jsxs("span",{children:["Appareil: ",e.jsx(r,{variant:"outline",children:c})]}):null,o?e.jsxs("span",{children:["Machine: ",e.jsx(r,{variant:"outline",children:o})]}):null]}),e.jsx("div",{className:"pt-2",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Retournez sur le logiciel WinDev et collez cette clé lorsque demandé."})})]})]}),l?e.jsx(p,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-green-600",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("p",{children:"Activation terminée avec succès."})]})})}):null,e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{href:a("dashboard"),children:"Retour au dashboard"}),e.jsx(m,{asChild:!0,children:e.jsxs("a",{href:a("licenses.certificate",{license:t?.id}),target:"_blank",rel:"noopener",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"})," Certificat"]})})]})]})})]})}export{Z as default};
