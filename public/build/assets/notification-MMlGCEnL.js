import{r as o,j as e,u as Z,b as w}from"./app-B3Y0P8eL.js";import{A as ee}from"./app-layout-BmrSMU7B.js";import{C as I,a as M,b as P,d as A}from"./card-B6WQ6knZ.js";import{s as y,t as te,v as se,w as E,B as $}from"./auth-ClV7ZO7P.js";import{u as W,b as z,B as u,s as S}from"./index-BS9Mkhtc.js";import{u as ae,c as oe,a as ne}from"./index-DOpKAXXZ.js";import{u as re}from"./index-DN2tWQS9.js";import{u as ie}from"./index-ChXgRNoH.js";import{P as X}from"./index-B7VOcpwy.js";import{L as B}from"./label-Dhbczhvd.js";import{D,a as F,b as L,c as H,d as O}from"./dialog-DgY4hv6z.js";import{I as ce}from"./IconLicense-BpE-UjGX.js";import{I as q}from"./IconCheck-Bwdy8G6I.js";/* empty css            */import"./chevron-right-CR-mXq2c.js";import"./index-BJlpveyn.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],de=y("outline","alert-triangle","AlertTriangle",le);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],me=y("outline","filter","Filter",ue);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],pe=y("outline","info-circle","InfoCircle",he);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],fe=y("outline","settings","Settings",xe);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],U=y("outline","trash","Trash",ge);var T="Switch",[be,Le]=oe(T),[ve,je]=be(T),G=o.forwardRef((n,i)=>{const{__scopeSwitch:a,name:s,checked:c,defaultChecked:v,required:m,disabled:d,value:h="on",onCheckedChange:p,form:r,...j}=n,[l,g]=o.useState(null),N=W(i,t=>g(t)),k=o.useRef(!1),C=l?r||!!l.closest("form"):!0,[x,f]=ae({prop:c,defaultProp:v??!1,onChange:p,caller:T});return e.jsxs(ve,{scope:a,checked:x,disabled:d,children:[e.jsx(X.button,{type:"button",role:"switch","aria-checked":x,"aria-required":m,"data-state":Y(x),"data-disabled":d?"":void 0,disabled:d,value:h,...j,ref:N,onClick:ne(n.onClick,t=>{f(b=>!b),C&&(k.current=t.isPropagationStopped(),k.current||t.stopPropagation())})}),C&&e.jsx(Q,{control:l,bubbles:!k.current,name:s,value:h,checked:x,required:m,disabled:d,form:r,style:{transform:"translateX(-100%)"}})]})});G.displayName=T;var J="SwitchThumb",K=o.forwardRef((n,i)=>{const{__scopeSwitch:a,...s}=n,c=je(J,a);return e.jsx(X.span,{"data-state":Y(c.checked),"data-disabled":c.disabled?"":void 0,...s,ref:i})});K.displayName=J;var Ne="SwitchBubbleInput",Q=o.forwardRef(({__scopeSwitch:n,control:i,checked:a,bubbles:s=!0,...c},v)=>{const m=o.useRef(null),d=W(m,v),h=re(a),p=ie(i);return o.useEffect(()=>{const r=m.current;if(!r)return;const j=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(j,"checked").set;if(h!==a&&g){const N=new Event("click",{bubbles:s});g.call(r,a),r.dispatchEvent(N)}},[h,a,s]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...c,tabIndex:-1,ref:d,style:{...c.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q.displayName=Ne;function Y(n){return n?"checked":"unchecked"}var ke=G,ye=K;function V({className:n,...i}){return e.jsx(ke,{"data-slot":"switch",className:z("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...i,children:e.jsx(ye,{"data-slot":"switch-thumb",className:z("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function He(){const n=[{title:"Notifications",href:"/client/notification"}],{notifications:i=[]}=Z().props,a=i.map(t=>{const b=t.type||"info",R={license:{icon:ce,iconColor:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"},download:{icon:se,iconColor:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"},course:{icon:te,iconColor:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30"},system:{icon:de,iconColor:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"},info:{icon:pe,iconColor:"text-cyan-600 dark:text-cyan-400",bgColor:"bg-cyan-100 dark:bg-cyan-900/30"}},_=R[b]||R.info;return{id:t.id,type:b,title:t.data?.title||(b==="download"?"Téléchargement":b==="license"?"Informations de licence":"Notification"),description:t.data?.message||t.data?.description||"",time:t.created_at?new Date(t.created_at).toLocaleString("fr-FR"):"",read:!!t.read_at,important:!!t.data?.important,icon:_.icon,iconColor:_.iconColor,bgColor:_.bgColor}}),[s,c]=o.useState("all"),[v,m]=o.useState(!0),[d,h]=o.useState(!0),[p,r]=o.useState(null),[j,l]=o.useState(!1),g=t=>{w.post(S("notifications.read",t),{},{preserveScroll:!0})},N=t=>{w.delete(S("notifications.destroy",t),{preserveScroll:!0})},k=()=>{w.post(S("notifications.read-all"),{},{preserveScroll:!0})},C=()=>{a.forEach(t=>w.delete(S("notifications.destroy",t.id),{preserveScroll:!0}))},x=a.filter(t=>s==="all"?!0:s==="unread"?!t.read:s==="important"?t.important:t.type===s),f=a.filter(t=>!t.read).length;return e.jsx(ee,{breadcrumbs:n,children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:f>0?`${f} notification${f>1?"s":""} non lue${f>1?"s":""}`:"Toutes vos notifications sont à jour"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:k,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Tout marquer comme lu"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>l(!0),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Tout effacer"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(I,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"Filtres"]})}),e.jsx(A,{className:"space-y-2",children:[{key:"all",label:"Toutes",count:a.length},{key:"unread",label:"Non lues",count:f},{key:"important",label:"Importantes",count:a.filter(t=>t.important).length},{key:"license",label:"Licences",count:a.filter(t=>t.type==="license").length},{key:"download",label:"Téléchargements",count:a.filter(t=>t.type==="download").length},{key:"course",label:"Formations",count:a.filter(t=>t.type==="course").length}].map(t=>e.jsxs("button",{onClick:()=>c(t.key),className:`w-full flex items-center justify-between p-2 rounded-lg text-sm transition-colors ${s===t.key?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"hover:bg-muted/50 text-muted-foreground"}`,children:[e.jsx("span",{children:t.label}),e.jsx($,{variant:"secondary",className:"text-xs",children:t.count})]},t.key))})]}),e.jsx(D,{open:!!p,onOpenChange:t=>{t||r(null)},children:e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsx(H,{children:"Supprimer la notification"}),e.jsx(O,{children:"Êtes-vous sûr de vouloir supprimer cette notification ? Cette action est définitive."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(u,{variant:"outline",type:"button",onClick:()=>r(null),children:"Annuler"}),e.jsx(u,{variant:"destructive",type:"button",onClick:()=>{p&&(N(p.id),r(null))},children:"Supprimer"})]})]})}),e.jsx(D,{open:j,onOpenChange:t=>{t||l(!1)},children:e.jsxs(F,{children:[e.jsxs(L,{children:[e.jsx(H,{children:"Tout effacer"}),e.jsx(O,{children:"Voulez-vous vraiment supprimer toutes vos notifications ? Cette action est irréversible."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(u,{variant:"outline",type:"button",onClick:()=>l(!1),children:"Annuler"}),e.jsx(u,{variant:"destructive",type:"button",onClick:()=>{l(!1),C()},children:"Tout effacer"})]})]})}),e.jsxs(I,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Paramètres"]})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{htmlFor:"email-notifications",className:"text-sm font-medium",children:"Notifications email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recevoir les notifications par email"})]}),e.jsx(V,{id:"email-notifications",checked:v,onCheckedChange:m})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{htmlFor:"push-notifications",className:"text-sm font-medium",children:"Notifications push"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alertes dans l'application"})]}),e.jsx(V,{id:"push-notifications",checked:d,onCheckedChange:h})]})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(I,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(P,{className:"text-lg",children:[s==="all"&&"Toutes les notifications",s==="unread"&&"Notifications non lues",s==="important"&&"Notifications importantes",s==="license"&&"Notifications de licences",s==="download"&&"Notifications de téléchargements",s==="course"&&"Notifications de formations"]})}),e.jsx(A,{className:"p-0",children:x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Aucune notification"}),e.jsx("p",{className:"text-muted-foreground",children:s==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${s==="unread"?"non lue":s} pour le moment.`})]}):e.jsx("div",{className:"divide-y divide-border",children:x.map(t=>e.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors group ${t.read?"":"bg-blue-50/50 dark:bg-blue-900/10"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-10 h-10 ${t.bgColor} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(t.icon,{className:`h-5 w-5 ${t.iconColor}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-semibold text-sm ${t.read?"text-muted-foreground":"text-foreground"}`,children:t.title}),t.important&&e.jsx($,{variant:"destructive",className:"text-xs",children:"Important"}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!t.read&&e.jsx(u,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>g(t.id),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>r(t),children:e.jsx(U,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.time})]})]})},t.id))})})]})})]})]})})}export{He as default};
