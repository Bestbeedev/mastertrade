import{j as e,H as h,L as u,t as p}from"./app-B3Y0P8eL.js";import{A as j}from"./app-layout-BmrSMU7B.js";import{C as l,a as i,b as n,c as f,d as c}from"./card-B6WQ6knZ.js";import{B as o}from"./auth-ClV7ZO7P.js";import{s as r,B as d,f as v}from"./index-BS9Mkhtc.js";import{A as b}from"./arrow-left-D1RE6sKu.js";import{D as w}from"./download-BmkC4sJt.js";import{F as N}from"./file-text-1gYjgS_u.js";import{R as C}from"./receipt-BiTZ1agA.js";import{P as A}from"./package-BLdoJui-.js";/* empty css            */import"./chevron-right-CR-mXq2c.js";import"./index-BJlpveyn.js";import"./index-DOpKAXXZ.js";import"./index-B7VOcpwy.js";import"./index-ChXgRNoH.js";function M({order:m}){const t=m?{...m,amount:m.amount||0,items:Array.isArray(m.items)?m.items:[]}:null,x=s=>v(s??0),g={completed:"default",pending:"secondary",processing:"outline",cancelled:"destructive",delivered:"default",shipped:"outline",paid:"default"},y=s=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 p-6 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Commande #",s.id]}),e.jsx(o,{variant:g[s.status]||"default",children:s.status})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Passée le ",s.created_at?new Date(s.created_at).toLocaleDateString("fr-FR"):""]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(s.id),p.success("Numéro de commande copié !")},children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Copier la référence"]}),e.jsx(d,{asChild:!0,children:e.jsxs("a",{href:r("orders.invoice",s.id),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Télécharger la facture"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(l,{className:"md:col-span-2",children:[e.jsx(i,{children:e.jsx(n,{children:"Articles"})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[Array.isArray(s.items)&&s.items.length>0?s.items.map(a=>e.jsxs("div",{className:"flex items-start justify-between border-b pb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-2 bg-muted rounded-md",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.name||s.product?.name||"Article"}),a.quantity&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",a.quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[typeof a.total=="number"&&e.jsx("p",{className:"font-medium",children:x(a.total)}),a.quantity>1&&typeof a.price=="number"&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x(a.price)," l'unité"]})]})]},a.id)):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Aucun article détaillé"}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("span",{className:"font-medium",children:"Total"}),e.jsx("span",{className:"text-lg font-bold",children:x(s.amount)})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(n,{className:"text-base",children:"Client"})}),e.jsxs(c,{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:s.customer?.name||"Non spécifié"}),e.jsx("p",{className:"text-muted-foreground",children:s.customer?.email}),s.customer?.company&&e.jsx("p",{className:"text-muted-foreground",children:s.customer.company})]})]}),e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(n,{className:"text-base",children:"Paiement"})}),e.jsxs(c,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Méthode"}),e.jsx("span",{children:s.payment?.method||"Non spécifié"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Statut"}),e.jsx(o,{variant:s.payment?.status==="Payé"?"default":"outline",children:s.payment?.status||"En attente"})]}),s.payment?.transaction&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Transaction"}),e.jsx("span",{className:"font-mono text-xs",children:s.payment.transaction})]})]})]}),e.jsxs(l,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(n,{className:"text-base",children:"Livraison"})}),e.jsxs(c,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Méthode"}),e.jsx("span",{children:s.shipping?.method||"Téléchargement"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Statut"}),e.jsx(o,{variant:s.shipping?.status==="Livré"?"default":"outline",children:s.shipping?.status||"En préparation"})]}),s.licenseKey&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Clé de licence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"px-3 py-2 bg-muted rounded-md font-mono text-sm",children:s.licenseKey}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(s.licenseKey),p.success("Clé de licence copiée !")},children:e.jsx(N,{className:"h-4 w-4"})})]})]})]})]})]})]})]});return t?e.jsxs(j,{breadcrumbs:[{title:"Commandes",href:r("orders")},{title:`Commande #${t.id}`,href:""}],children:[e.jsx(h,{title:`Commande #${t.id}`}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsx(d,{variant:"ghost",asChild:!0,className:"w-full sm:w-auto",children:e.jsxs(u,{href:r("orders"),className:"flex items-center justify-center sm:justify-start gap-2",children:[e.jsx(b,{className:"h-4 w-4"})," Retour aux commandes"]})})}),e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Détails de la commande"}),e.jsx(f,{children:"Données réelles de la commande"})]}),e.jsxs(c,{children:[y(t),t.status==="completed"&&t.product?.download_url&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(d,{asChild:!0,children:e.jsxs("a",{href:r("downloads.start",t.product_id),children:[e.jsx(w,{className:"h-4 w-4 mr-2"})," Télécharger le produit"]})})})]})]})]})]}):e.jsxs(j,{breadcrumbs:[{title:"Commandes",href:r("orders")},{title:"Commande",href:""}],children:[e.jsx(h,{title:"Commande"}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Commande introuvable"}),e.jsx(f,{children:"Réessayez depuis la liste des commandes."})]}),e.jsx(c,{children:e.jsx(d,{asChild:!0,variant:"outline",children:e.jsx(u,{href:r("orders"),children:"Retour aux commandes"})})})]})})]})}export{M as default};
