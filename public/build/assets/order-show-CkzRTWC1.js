import{j as e,H as o,L as x,a as N}from"./app-B3Y0P8eL.js";import{A as u}from"./app-layout-BmrSMU7B.js";import{C as l,a as n,b as c,c as h,d as m}from"./card-B6WQ6knZ.js";import{c as C,s as t,B as i,f as b}from"./index-BS9Mkhtc.js";import{B as y}from"./auth-ClV7ZO7P.js";import{I as w}from"./input-B58C95N6.js";import{S as A,a as S,b as R,c as _,d}from"./select-CRiprpJX.js";import{A as k}from"./arrow-left-D1RE6sKu.js";import{F as p}from"./file-text-1gYjgS_u.js";import{P as F}from"./package-BLdoJui-.js";/* empty css            */import"./chevron-right-CR-mXq2c.js";import"./index-BJlpveyn.js";import"./index-DOpKAXXZ.js";import"./index-B7VOcpwy.js";import"./index-ChXgRNoH.js";import"./index-DN2tWQS9.js";import"./check-Dwe-_DrS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],L=C("UserRound",D);function X({order:s}){if(!s)return e.jsxs(u,{breadcrumbs:[{title:"Admin",href:t("admin")},{title:"Commandes",href:t("admin.orders")},{title:"Commande",href:""}],children:[e.jsx(o,{title:"Admin • Commande"}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Commande introuvable"}),e.jsx(h,{children:"Retournez à la liste des commandes."})]}),e.jsx(m,{children:e.jsx(i,{asChild:!0,variant:"outline",children:e.jsx(x,{href:t("admin.orders"),children:"Retour aux commandes"})})})]})})]});const a=N({status:s.status,amount:(typeof s.amount=="number"?s.amount:0)/100}),j=()=>{a.setData("amount",Math.round((Number(a.data.amount)||0)*100)),a.patch(t("admin.orders.update",s.id),{preserveScroll:!0})},f=({s:r})=>{const g={pending:"secondary",paid:"default",failed:"destructive",refunded:"outline"},v={pending:"En attente",paid:"Payée",failed:"Échouée",refunded:"Remboursée"}[r]||r;return e.jsx(y,{variant:g[r]||"outline",children:v})};return e.jsxs(u,{breadcrumbs:[{title:"Admin",href:t("admin")},{title:"Commandes",href:t("admin.orders")},{title:`Commande #${s.id?.slice(0,8)}`,href:""}],children:[e.jsx(o,{title:`Admin • Commande #${s.id}`}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{asChild:!0,variant:"ghost",children:e.jsxs(x,{href:t("admin.orders"),className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"})," Retour"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{asChild:!0,variant:"outline",children:e.jsxs("a",{href:t("orders.invoice",s.id),target:"_blank",rel:"noreferrer",className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"})," Facture PDF"]})}),e.jsx(i,{onClick:j,disabled:a.processing,children:a.processing?"Enregistrement...":"Enregistrer"})]})]}),e.jsxs(l,{children:[e.jsxs(n,{children:[e.jsx(c,{children:"Détails de la commande"}),e.jsxs(h,{children:["Référence #",s.id]})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(f,{s:a.data.status}),e.jsxs("span",{className:"text-sm",children:["Créée le ",s.created_at?new Date(s.created_at).toLocaleString("fr-FR"):""]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Montant"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{type:"number",min:0,step:"0.01",value:a.data.amount,onChange:r=>a.setData("amount",parseFloat(r.target.value||"0")||0),className:"w-40"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:b(s.amount||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Statut"}),e.jsxs(A,{value:a.data.status,onValueChange:r=>a.setData("status",r),children:[e.jsx(S,{className:"w-48",children:e.jsx(R,{})}),e.jsxs(_,{children:[e.jsx(d,{value:"pending",children:"En attente"}),e.jsx(d,{value:"paid",children:"Payée"}),e.jsx(d,{value:"failed",children:"Échouée"}),e.jsx(d,{value:"refunded",children:"Remboursée"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("div",{className:"font-medium",children:"Client"})]}),e.jsx("div",{className:"text-sm",children:s.user?.name||"—"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.user?.email||""})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("div",{className:"font-medium",children:"Produit"})]}),e.jsx("div",{className:"text-sm",children:s.product?.name||"—"}),s.product?.download_url?e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.product.download_url}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"Aucun lien de téléchargement"})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(l,{children:[e.jsx(n,{className:"pb-2",children:e.jsx(c,{className:"text-base",children:"Actions"})}),e.jsx(m,{className:"space-y-2",children:e.jsx(i,{asChild:!0,variant:"outline",className:"w-full",children:e.jsxs("a",{href:t("orders.invoice",s.id),target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 justify-center",children:[e.jsx(p,{className:"h-4 w-4"})," Télécharger la facture"]})})})]})})]})})]})]})]})}export{X as default};
