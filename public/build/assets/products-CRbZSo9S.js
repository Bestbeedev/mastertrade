import{U as N,a as y,j as e,H as ne,t as d}from"./app-B3Y0P8eL.js";import{A as ce}from"./app-layout-BmrSMU7B.js";import{C as D,a as z,b as q,c as S,d as A,e as de}from"./card-B6WQ6knZ.js";import{c as v,B as l,s as b}from"./index-BS9Mkhtc.js";import{I as n}from"./input-B58C95N6.js";import{L as t}from"./label-Dhbczhvd.js";import{S as E,a as P,b as T,c as L,d as M}from"./select-CRiprpJX.js";import{T as V,a as I,b as u,c as m}from"./tabs-7x_I4q-o.js";import{D as R,a as H,b as G,c as O,d as U}from"./dialog-DgY4hv6z.js";import{P as k}from"./package-BLdoJui-.js";import{L as oe}from"./list-DObC2HKt.js";import{P as g}from"./plus-DJXp46-F.js";import{I as $}from"./info-Bj0kZ_4j.js";import{T as x}from"./trash-2-nXQCgoxj.js";import{T as ue}from"./tag-BjPciNeU.js";import{F as B}from"./file-text-1gYjgS_u.js";/* empty css            */import"./auth-ClV7ZO7P.js";import"./index-BJlpveyn.js";import"./index-DOpKAXXZ.js";import"./index-B7VOcpwy.js";import"./index-ChXgRNoH.js";import"./chevron-right-CR-mXq2c.js";import"./index-DN2tWQS9.js";import"./check-Dwe-_DrS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],he=v("FileCheck2",me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],pe=v("FileCode",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ve=v("Hash",ge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fe=v("Settings",je);function $e({products:C=[]}){const[K,w]=N.useState("details"),[o,p]=N.useState(null),[j,h]=N.useState(null),i=y({id:"",name:"",sku:"",version:"1.0.0",download_url:"",checksum:"",size:0,changelog:"",description:"",category:"software",features:[""],price:0,requires_license:!1,is_active:!0}),W=s=>{p(s),i.setData({id:s.id,name:s.name??"",sku:s.sku??"",version:s.version??"1.0.0",download_url:s.download_url??"",checksum:s.checksum??"",size:s.size??0,changelog:s.changelog??"",description:s.description??"",category:s.category??"software",features:Array.isArray(s.features)?s.features:[],price:typeof s.price_cents=="number"?Math.max(0,(s.price_cents||0)/100):0,requires_license:!!s.requires_license,is_active:s.is_active??!0})},J=s=>{if(s.preventDefault(),!o)return;const r=d.loading("Mise à jour du produit...");i.patch(b("admin.products.update",o.id),{preserveScroll:!0,onSuccess:()=>{d.success("Produit mis à jour",{id:r}),p(null)},onError:()=>{d.error("Erreur lors de la mise à jour du produit",{id:r})}})},a=y({name:"",sku:"",version:"1.0.0",download_url:"",checksum:"",size:0,changelog:`- Correction de bugs mineurs
- Amélioration des performances
- Nouvelles fonctionnalités`,description:"",category:"software",price:0,is_active:!0,requires_license:!0,file:null,changelog_file:null,features:[""],requirements:[""]}),_=[{value:"software",label:"Logiciel"},{value:"plugin",label:"Extension/Plugin"},{value:"template",label:"Modèle"},{value:"addon",label:"Module complémentaire"},{value:"bundle",label:"Pack/Forfait"}],Q=s=>{s.preventDefault();const r=d.loading("Création du produit en cours...");a.post(b("admin.products.store"),{onSuccess:()=>{d.success("Produit créé avec succès !",{id:r}),a.reset(),a.setData({...a.data,version:"1.0.0",changelog:`- Correction de bugs mineurs
- Amélioration des performances
- Nouvelles fonctionnalités`,features:[""],requirements:[""]})},onError:()=>{d.error("Une erreur est survenue lors de la création du produit",{id:r})}})},X=()=>{a.setData("features",[...a.data.features,""])},Y=s=>{const r=[...a.data.features];r.splice(s,1),a.setData("features",r)},Z=(s,r)=>{const c=[...a.data.features];c[s]=r,a.setData("features",c)},ee=s=>{s.target.files&&s.target.files[0]&&a.setData("file",s.target.files[0])},se=s=>{s.target.files&&s.target.files[0]&&a.setData("changelog_file",s.target.files[0])},ae=()=>{const s=i.data.features||[];i.setData("features",[...s,""])},ie=s=>{const r=[...i.data.features||[]];r.splice(s,1),i.setData("features",r)},te=(s,r)=>{const c=[...i.data.features||[]];c[s]=r,i.setData("features",c)},{delete:re,processing:f}=y({}),le=()=>{if(!j)return;const s=d.loading("Suppression du produit..."),r=j.id;re(b("admin.products.destroy",{product:r}),{onSuccess:()=>{d.success("Produit supprimé avec succès",{id:s}),h(null)},onError:()=>d.error("Erreur lors de la suppression du produit",{id:s})})};return e.jsxs(ce,{breadcrumbs:[{title:"Admin",href:"/admin"},{title:"Produits",href:"/admin/products"}],children:[e.jsx(ne,{title:"Admin • Gestion des Produits"}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des Produits"}),e.jsx("p",{className:"text-muted-foreground",children:"Créez et gérez vos produits logiciels"})]}),e.jsxs(l,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Nouveau Produit"]})]}),e.jsxs(V,{defaultValue:"list",className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs(u,{value:"list",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"})," Liste des produits"]}),e.jsxs(u,{value:"new",className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," Nouveau produit"]})]}),e.jsx(m,{value:"list",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs(z,{children:[e.jsx(q,{children:"Produits existants"}),e.jsx(S,{children:"Liste de tous les produits disponibles dans votre boutique"})]}),e.jsx(A,{children:C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-medium",children:"Aucun produit trouvé"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Commencez par ajouter votre premier produit."})]}):e.jsx("div",{className:"space-y-4",children:C.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(k,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.sku," • ",s.category]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",className:"gap-1",type:"button",onClick:()=>W(s),children:[e.jsx($,{className:"h-4 w-4"}),"Détails"]}),e.jsx(l,{variant:"destructive",size:"sm",type:"button",onClick:()=>h(s),disabled:f,children:e.jsx(x,{className:"h-4 w-4"})})]})]},s.id))})})]})}),e.jsx(R,{open:!!j,onOpenChange:s=>{s||h(null)},children:e.jsxs(H,{className:"max-w-4xl lg:max-w-6xl xl:max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(O,{children:"Confirmer la suppression"}),e.jsx(U,{children:"Êtes-vous sûr de vouloir supprimer ce produit ? Cette action est définitive et supprimera l'accès au téléchargement associé."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(l,{variant:"outline",type:"button",onClick:()=>h(null),children:"Annuler"}),e.jsx(l,{variant:"destructive",type:"button",onClick:le,disabled:f,children:"Supprimer"})]})]})}),e.jsx(m,{value:"new",children:e.jsx("form",{onSubmit:Q,children:e.jsxs(D,{children:[e.jsxs(z,{children:[e.jsx(q,{children:"Nouveau Produit"}),e.jsx(S,{children:"Remplissez les détails de votre nouveau produit logiciel"})]}),e.jsx(A,{className:"space-y-6",children:e.jsxs(V,{value:K,onValueChange:w,className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs(u,{value:"details",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"})," Détails"]}),e.jsxs(u,{value:"pricing",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"})," Tarification"]}),e.jsxs(u,{value:"files",className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"})," Fichiers"]}),e.jsxs(u,{value:"advanced",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"})," Options avancées"]})]}),e.jsx(m,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Nom du produit"}),e.jsx(n,{id:"name",placeholder:"Ex: MasterTrade Pro",value:a.data.name,onChange:s=>a.setData("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sku",children:"Référence (SKU)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(n,{id:"sku",placeholder:"Ex: MTP-001",value:a.data.sku,onChange:s=>a.setData("sku",s.target.value),required:!0})}),e.jsx(l,{type:"button",variant:"outline",size:"icon",title:"Générer une référence",onClick:()=>{const s=`PRD-${Math.random().toString(36).substring(2,8).toUpperCase()}`;a.setData("sku",s)},children:e.jsx(ve,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"version",children:"Version"}),e.jsx(n,{id:"version",placeholder:"Ex: 1.0.0",value:a.data.version,onChange:s=>a.setData("version",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"category",children:"Catégorie"}),e.jsxs(E,{value:a.data.category,onValueChange:s=>a.setData("category",s),children:[e.jsx(P,{className:"w-full",children:e.jsx(T,{placeholder:"Sélectionnez une catégorie"})}),e.jsx(L,{children:_.map(s=>e.jsx(M,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",placeholder:"Décrivez votre produit en détail...",value:a.data.description,onChange:s=>a.setData("description",s.target.value),rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Fonctionnalités"}),e.jsxs("div",{className:"space-y-2",children:[a.data.features.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{value:s,onChange:c=>Z(r,c.target.value),placeholder:"Fonctionnalité"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",onClick:()=>Y(r),children:e.jsx(x,{className:"h-4 w-4 text-destructive"})})]},r)),e.jsxs(l,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:X,children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Ajouter une fonctionnalité"]})]})]})})]})}),e.jsx(m,{value:"pricing",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"price",children:"Prix (FCFA)"}),e.jsx(n,{id:"price",type:"number",min:"0",step:"0.01",value:a.data.price,onChange:s=>a.setData("price",parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Options de licence"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"requires_license",checked:a.data.requires_license,onChange:s=>a.setData("requires_license",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(t,{htmlFor:"requires_license",className:"text-sm font-medium",children:"Nécessite une licence"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:a.data.is_active,onChange:s=>a.setData("is_active",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(t,{htmlFor:"is_active",className:"text-sm font-medium",children:"Produit actif"})]})]})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Aperçu du produit"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:a.data.name||"Nom du produit"}),e.jsx("p",{className:"text-muted-foreground",children:a.data.description||"Aucune description fournie"}),e.jsx("div",{className:"pt-2",children:e.jsx("span",{className:"text-lg font-bold",children:a.data.price?`${a.data.price.toFixed(2)} FCFA`:"Gratuit"})})]})]})]})}),e.jsx(m,{value:"files",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"download_url",children:"Lien de téléchargement (Google Drive)"}),e.jsx(n,{id:"download_url",placeholder:"https://drive.google.com/file/d/FILE_ID/view",value:a.data.download_url,onChange:s=>a.setData("download_url",s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Collez un lien Google Drive public. Les téléchargements seront servis via l’application."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"file",children:"Fichier du produit (optionnel)"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{htmlFor:"file-upload",className:"flex flex-1 cursor-pointer items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("span",{className:"truncate",children:a.data.file?.name||"Sélectionner un fichier..."}),e.jsxs(l,{type:"button",variant:"ghost",size:"sm",className:"ml-2",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Parcourir"]}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:ee})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Formats acceptés : .zip, .exe, .dmg, .pkg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"changelog",children:"Notes de version"}),e.jsx("textarea",{id:"changelog",placeholder:"- Correction de bugs\\n- Nouvelles fonctionnalités\\n- Améliorations",value:a.data.changelog,onChange:s=>a.setData("changelog",s.target.value),rows:5,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"changelog_file",children:"Fichier de notes de version (optionnel)"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("label",{htmlFor:"changelog-file-upload",className:"flex flex-1 cursor-pointer items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("span",{className:"truncate",children:a.data.changelog_file?.name||"Sélectionner un fichier..."}),e.jsxs(l,{type:"button",variant:"ghost",size:"sm",className:"ml-2",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Parcourir"]}),e.jsx("input",{id:"changelog-file-upload",name:"changelog-file-upload",type:"file",className:"sr-only",onChange:se})]})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fichier texte ou markdown contenant les notes de version détaillées"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Vérification d'intégrité"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"checksum",className:"text-sm",children:"Empreinte numérique (SHA-256) - (optionnel)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(n,{id:"checksum",placeholder:"Ex: a1b2c3d4...",value:a.data.checksum,onChange:s=>a.setData("checksum",s.target.value)})}),e.jsx(l,{type:"button",variant:"outline",size:"icon",title:"Générer une empreinte",disabled:!a.data.file,onClick:()=>{if(a.data.file){const s=Array(64).fill(0).map(()=>Math.floor(Math.random()*16).toString(16)).join("");a.setData("checksum",s),d.success("Empreinte générée avec succès")}else d.error("Veuvez d'abord sélectionner un fichier")},children:e.jsx(he,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"L'empreinte permet de vérifier l'intégrité du fichier téléchargé"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"size",className:"text-sm",children:"Taille du fichier (Mo)"}),e.jsx(n,{id:"size",type:"number",min:"0",step:"0.1",value:a.data.size,onChange:s=>a.setData("size",parseFloat(s.target.value)||0)})]})]})]})})]})}),e.jsx(m,{value:"advanced",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Configuration avancée"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"auto_version",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(t,{htmlFor:"auto_version",className:"text-sm font-medium",children:"Mise à jour automatique des versions mineures"})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Incrémente automatiquement le numéro de version pour les mises à jour mineures"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"notify_users",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",defaultChecked:!0}),e.jsx(t,{htmlFor:"notify_users",className:"text-sm font-medium",children:"Notifier les utilisateurs des mises à jour"})]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Envoyer une notification par email aux utilisateurs lors des mises à jour"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Exigences système"}),e.jsxs("div",{className:"space-y-2",children:[a.data.requirements.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{value:s,onChange:c=>{const F=[...a.data.requirements];F[r]=c.target.value,a.setData("requirements",F)},placeholder:"Ex: Windows 10+, 4GB RAM"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",onClick:()=>{const c=[...a.data.requirements];c.splice(r,1),a.setData("requirements",c)},children:e.jsx(x,{className:"h-4 w-4 text-destructive"})})]},r)),e.jsxs(l,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>a.setData("requirements",[...a.data.requirements,""]),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Ajouter une exigence"]})]})]})]})})]})}),e.jsxs(de,{className:"flex justify-between border-t px-6 py-4",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{confirm("Voulez-vous vraiment annuler ? Les modifications non enregistrées seront perdues.")&&(a.reset(),w("details"))},children:"Annuler"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>{d("Brouillon enregistré",{description:"Vos modifications ont été enregistrées comme brouillon."})},children:"Enregistrer comme brouillon"}),e.jsx(l,{type:"submit",disabled:a.processing,children:a.processing?"Enregistrement...":"Créer le produit"})]})]})]})})})]}),e.jsx(R,{open:!!o,onOpenChange:s=>!s&&p(null),children:e.jsxs(H,{className:"max-w-4xl lg:max-w-6xl xl:max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(O,{children:"Détails du produit"}),e.jsx(U,{children:"Consultez et mettez à jour les informations de ce produit logiciel."})]}),o&&e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_name",children:"Nom du produit"}),e.jsx(n,{id:"edit_name",value:i.data.name,onChange:s=>i.setData("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_sku",children:"Référence (SKU)"}),e.jsx(n,{id:"edit_sku",value:i.data.sku,onChange:s=>i.setData("sku",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_version",children:"Version"}),e.jsx(n,{id:"edit_version",value:i.data.version,onChange:s=>i.setData("version",s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_category",children:"Catégorie"}),e.jsxs(E,{value:i.data.category,onValueChange:s=>i.setData("category",s),children:[e.jsx(P,{id:"edit_category",className:"w-full",children:e.jsx(T,{placeholder:"Sélectionnez une catégorie"})}),e.jsx(L,{children:_.map(s=>e.jsx(M,{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_size",children:"Taille du fichier (octets)"}),e.jsx(n,{id:"edit_size",type:"number",min:0,value:i.data.size,onChange:s=>i.setData("size",parseInt(s.target.value||"0",10))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_checksum",children:"Empreinte (SHA-256)"}),e.jsx(n,{id:"edit_checksum",value:i.data.checksum,onChange:s=>i.setData("checksum",s.target.value),placeholder:"Laisser vide pour régénérer automatiquement"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(t,{htmlFor:"edit_download_url",children:"Lien de téléchargement (Google Drive)"}),e.jsx(n,{id:"edit_download_url",value:i.data.download_url,onChange:s=>i.setData("download_url",s.target.value),placeholder:"https://drive.google.com/file/d/FILE_ID/view"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_description",children:"Description"}),e.jsx("textarea",{id:"edit_description",value:i.data.description,onChange:s=>i.setData("description",s.target.value),rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_price",children:"Prix (FCFA)"}),e.jsx(n,{id:"edit_price",type:"number",min:0,step:"0.01",value:i.data.price,onChange:s=>i.setData("price",parseFloat(s.target.value||"0")||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!i.data.requires_license,onChange:s=>i.setData("requires_license",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Nécessite une licence"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!i.data.is_active,onChange:s=>i.setData("is_active",s.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:"Produit actif"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Fonctionnalités"}),e.jsxs("div",{className:"space-y-2",children:[i.data.features?.map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{value:s,onChange:c=>te(r,c.target.value),placeholder:"Fonctionnalité"}),e.jsx(l,{type:"button",variant:"ghost",size:"icon",onClick:()=>ie(r),children:e.jsx(x,{className:"h-4 w-4 text-destructive"})})]},r)),e.jsxs(l,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:ae,children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Ajouter une fonctionnalité"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"edit_changelog",children:"Notes de version"}),e.jsx("textarea",{id:"edit_changelog",value:i.data.changelog,onChange:s=>i.setData("changelog",s.target.value),rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),e.jsx("div",{className:"flex justify-between items-center text-xs text-muted-foreground",children:e.jsxs("span",{children:["Créé le ",o.created_at?new Date(o.created_at).toLocaleDateString("fr-FR"):"—"]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>p(null),children:"Annuler"}),e.jsx(l,{variant:"destructive",size:"sm",type:"button",onClick:()=>h(o),disabled:f,children:e.jsx(x,{className:"h-4 w-4"})}),e.jsx(l,{type:"submit",disabled:i.processing,children:i.processing?"Enregistrement...":"Enregistrer les modifications"})]})]})]})})]})]})}export{$e as default};
